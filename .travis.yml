sudo: required
language: vim
node_js: stable

install:
  - pwd
  - git clone https://github.com/junegunn/vader.vim.git test/vader.vim
  - git clone https://github.com/vim/vim /tmp/vim
  - mkdir ~/bin
  - cd /tmp/vim
  - sudo apt-get install -y gettext libncurses5-dev libacl1-dev libgpm-dev
  - ./configure --with-features=huge --enable-fail-if-missing --enable-pythoninterp --prefix=$HOME/bin/vim
  - make && make install
  - git clone https://github.com/junegunn/vader.vim.git
  - export VIM_EXE=$HOME/bin/vim/bin/vim
  - cd $HOME/build/heavenshell/vim-prettier/tests
  - npm install

before_script:
  - $HOME/bin/vim/bin/vim --version
  - cd $HOME/build/heavenshell/vim-prettier/tests

script: |
  $HOME/bin/vim/bin/vim -Nu <(cat << VIMRC
  filetype off
  set rtp+=vader.vim
  set rtp+=../.
  set rtp+=after
  filetype plugin indent on
  syntax enable
  VIMRC) -c 'Vader! *.vader' > /dev/null
